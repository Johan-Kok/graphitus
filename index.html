<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Graphitus by ezbz</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/ezbz/graphitus">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/ezbz/graphitus/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/ezbz/graphitus/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Graphitus</h1>
          <p>A simple graphite based dashboard system</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/ezbz">ezbz</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <h1>
<a name="introduction" class="anchor" href="#introduction"><span class="octicon octicon-link"></span></a>Introduction</h1>

<p>A simple, client-side, JSON-based <a href="http://graphite.wikidot.com/">Graphite</a> logical-dashboard UI built with <a href="http://twitter.github.com/bootstrap/">bootstrap</a> and <a href="http://underscorejs.org/">underscore.js</a></p>

<h1>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h1>

<p>Graphitus is pure client side, all you have to do to run it is put it under a web-server that can serve HTTP requests.</p>

<h1>
<a name="configuration" class="anchor" href="#configuration"><span class="octicon octicon-link"></span></a>Configuration</h1>

<p>Graphitus dashboards are defined using JSON notation. These configuration snippets can be stored in a document database like <a href="http://couchdb.apache.org/">couchdb</a> or <a href="http://www.mongodb.org/">mongo</a> and can also be files on the server.</p>

<h2>
<a name="graphitus-configuration" class="anchor" href="#graphitus-configuration"><span class="octicon octicon-link"></span></a>Graphitus Configuration</h2>

<p>Below is an example of global configuration (a file named <code>config.json</code>) using static local JSON files (the dashboards ids are the file names with a <code>.json</code> extension):</p>

<div class="highlight highlight-javascript"><pre><span class="p">{</span>
    <span class="s2">"graphiteUrl"</span><span class="o">:</span> <span class="s2">"http://graphite.mysite.com"</span><span class="p">,</span>
    <span class="s2">"dashboardListUrl"</span><span class="o">:</span> <span class="s2">"dashboard-index.json"</span><span class="p">,</span>
    <span class="s2">"dashboardUrlTemplate"</span><span class="o">:</span> <span class="s2">"${dashboardId}.json"</span><span class="p">,</span>
    <span class="s2">"eventsUrl"</span><span class="o">:</span> <span class="s2">"events.json"</span><span class="p">,</span>
    <span class="s2">"eventsDateFormat"</span><span class="o">:</span> <span class="s2">"HH:mm:ss DD/MM/YYYY"</span><span class="p">,</span>
    <span class="s2">"eventsTimezone"</span><span class="o">:</span> <span class="s2">"US/Eastern"</span><span class="p">,</span>
    <span class="s2">"timezones"</span><span class="o">:</span> <span class="p">[</span><span class="s2">"US/Eastern"</span><span class="p">,</span> <span class="s2">"US/Central"</span><span class="p">,</span> <span class="s2">"US/Pacific"</span><span class="p">,</span> <span class="s2">"Europe/London"</span><span class="p">,</span> <span class="s2">"Israel"</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>

<p>Below is an example of global configuration (a file named <code>config.json</code>) using couch db:</p>

<div class="highlight highlight-javascript"><pre><span class="p">{</span>
    <span class="s2">"graphiteUrl"</span><span class="o">:</span> <span class="s2">"http://graphite.mysite.com"</span><span class="p">,</span>
    <span class="s2">"dashboardListUrl"</span><span class="o">:</span> <span class="s2">"http://couch.mysite.com:5984/graphitus-dashboards/_all_docs"</span><span class="p">,</span> <span class="c1">// must return a JSON with a "rows" element containing an array of rows with dashboard id ("id" attribute)</span>
    <span class="s2">"dashboardUrlTemplate"</span><span class="o">:</span> <span class="s2">"http://couch.mysite.com:5984/graphitus-dashboards/${dashboardId}"</span><span class="p">,</span>
    <span class="s2">"eventsUrl"</span><span class="o">:</span> <span class="s2">"events.json"</span><span class="p">,</span>
    <span class="s2">"eventsDateFormat"</span><span class="o">:</span> <span class="s2">"HH:mm:ss DD/MM/YYYY"</span><span class="p">,</span>
    <span class="s2">"eventsTimezone"</span><span class="o">:</span> <span class="s2">"US/Eastern"</span><span class="p">,</span>
    <span class="s2">"timezones"</span><span class="o">:</span> <span class="p">[</span><span class="s2">"US/Eastern"</span><span class="p">,</span> <span class="s2">"US/Central"</span><span class="p">,</span> <span class="s2">"US/Pacific"</span><span class="p">,</span> <span class="s2">"Europe/London"</span><span class="p">,</span> <span class="s2">"Israel"</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>

<h2>
<a name="dashboard-configuration" class="anchor" href="#dashboard-configuration"><span class="octicon octicon-link"></span></a>Dashboard Configuration</h2>

<p>Below is an example dashboard configuration:</p>

<div class="highlight highlight-javascript"><pre><span class="p">{</span>
    <span class="s2">"title"</span><span class="o">:</span> <span class="s2">"MySQL Production Cluster"</span><span class="p">,</span> <span class="c1">// give a title to page   </span>
    <span class="s2">"columns"</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">// the number of charts in a row side by side, mostly 2 or 4</span>
    <span class="s2">"user"</span><span class="o">:</span> <span class="s2">"erezmazor"</span><span class="p">,</span> <span class="c1">// owner   </span>
    <span class="s2">"timeBack"</span><span class="o">:</span> <span class="mi">12</span><span class="nx">h</span><span class="p">,</span> <span class="c1">// time range back from current time (can be expressed in minutes/hours/days/weeks e.g., 30m/12h/1d/2w)    </span>
    <span class="s2">"from"</span><span class="o">:</span> <span class="s2">""</span><span class="p">,</span> <span class="c1">// start date for the date range, prefer timeBack as any date you choose will become stale  </span>
    <span class="s2">"until"</span><span class="o">:</span> <span class="s2">""</span><span class="p">,</span> <span class="c1">// end date for the date range, prefer timeBack as any date you choose will become stale   </span>
    <span class="s2">"width"</span><span class="o">:</span> <span class="mi">700</span><span class="p">,</span> <span class="c1">// width of each chart image, should correlate with # columns defined</span>
    <span class="s2">"height"</span><span class="o">:</span> <span class="mi">450</span><span class="p">,</span> <span class="c1">// height of each chart image</span>
    <span class="s2">"legend"</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// show the legend in chart</span>
    <span class="s2">"refresh"</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// auto refresh</span>
    <span class="s2">"refreshIntervalSeconds"</span><span class="o">:</span> <span class="mi">90</span><span class="p">,</span> <span class="c1">// auto refresh interval in seconds</span>
    <span class="s2">"averageSeries"</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// for targets that aggregate a lot of metrics prefer setting this to true as it will average many lines into one</span>
    <span class="s2">"defaultLineWidth"</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">// line width for chart lines</span>
    <span class="s2">"tz"</span><span class="o">:</span> <span class="s2">"US/Eastern"</span><span class="p">,</span> <span class="c1">// timezone for the rendered graph</span>
    <span class="s2">"data"</span><span class="o">:</span> <span class="p">[</span> <span class="c1">// charts list</span>
        <span class="p">{</span>
            <span class="s2">"title"</span><span class="o">:</span> <span class="s2">"Slow Queries"</span><span class="p">,</span> <span class="c1">// a title for the chart image</span>
            <span class="s2">"target"</span><span class="o">:</span> <span class="s2">"groupByNode(machines.${dc}dc1.mysql*.Slow_queries,2,\"nonNegativeDerivative\")"</span><span class="p">,</span> <span class="c1">// the graphite target/function which defines the chart content</span>
            <span class="s2">"params"</span><span class="o">:</span> <span class="s2">"areaMode=stacked&amp;lineMode=staircase&amp;colorList=blue,red,green"</span> <span class="c1">// specify additional parameters for this target</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s2">"title"</span><span class="o">:</span> <span class="s2">"Seconds Behind Master"</span><span class="p">,</span>
            <span class="s2">"target"</span><span class="o">:</span> <span class="s2">"groupByNode(machines.${dc}dc1.mysql*.Seconds_Behind_Master,2,\"averageSeries\")"</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s2">"title"</span><span class="o">:</span> <span class="s2">"Queries Per Second"</span><span class="p">,</span>
            <span class="s2">"target"</span><span class="o">:</span> <span class="p">[</span> <span class="c1">// you can specify mutliple targets for a chart as a JSON array</span>
                <span class="s2">"derivative(machines.${dc}dc1.mysql*.Qps1)"</span><span class="p">,</span>
                <span class="s2">"derivative(machines.${dc}dc1.mysql*.Qps2)"</span>
            <span class="p">],</span>
            <span class="s2">"description"</span><span class="o">:</span> <span class="s2">"The number of queries per second executed by the server"</span> <span class="c1">// show a description tooltip next to the title</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">"parameters"</span><span class="o">:</span> <span class="p">{</span> <span class="c1">// parameters to tokens expressed in targets with ${paramName} format  </span>
        <span class="s2">"datacetner"</span><span class="o">:</span> <span class="p">{</span> <span class="c1">// label for a select box in the UI</span>
            <span class="s2">"All"</span><span class="o">:</span> <span class="p">{</span> <span class="c1">// display name for a select box in the UI</span>
                <span class="s2">"dc"</span><span class="o">:</span> <span class="s2">"*"</span> <span class="c1">// the token name (dc) as specified in the target name and the actual token value (*)            </span>
            <span class="p">},</span>
            <span class="s2">"New York"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"dc"</span><span class="o">:</span> <span class="s2">"ny"</span>
            <span class="p">},</span>
            <span class="s2">"LA"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"dc"</span><span class="o">:</span> <span class="s2">"la"</span>
            <span class="p">},</span>
            <span class="s2">"Chicago"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"dc"</span><span class="o">:</span> <span class="s2">"chi"</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<ul>
<li>Below is a screenshot of a sample dashboard:</li>
</ul><p><img src="https://raw.github.com/erezmazor/graphitus/master/doc/screenshot.png" alt="Screenshot"></p>

<ul>
<li>Clicking on a graph image will generate a nice <a href="http://code.shutterstock.com/rickshaw/">Rickshaw</a>-based graph with hover-values and a toggle-legend</li>
</ul><p><img src="https://raw.github.com/erezmazor/graphitus/master/doc/extended.png" alt="Extended"></p>

<ul>
<li>Clicking on a the <code>histogram</code> button (<img src="https://raw.github.com/erezmazor/graphitus/master/doc/histogram.png" alt="Histogram">) will generate a <a href="https://github.com/mbostock/d3/wiki/Histogram-Layout">D3 Histogram</a>
</li>
</ul><p><img src="https://raw.github.com/erezmazor/graphitus/master/doc/histogram-lightbox.png" alt="Histogram"></p>

<ul>
<li>Clicking on a the <code>source</code> button (<img src="https://raw.github.com/erezmazor/graphitus/master/doc/source.png" alt="Source">) will show the target source and allow you to edit it in place</li>
</ul><p><img src="https://raw.github.com/erezmazor/graphitus/master/doc/source-editor.png" alt="Source Editor"></p>

<ul>
<li>Clicking on a the <code>functions</code> button (<img src="https://raw.github.com/erezmazor/graphitus/master/doc/functions.png" alt="Functions">) will show some options for manipulating the graph using the <a href="http://graphite.readthedocs.org/en/1.0/url-api.html">Graphite URL API</a>
</li>
</ul><p><img src="https://raw.github.com/erezmazor/graphitus/master/doc/functions-drop.png" alt="Function Options"></p>

<ul>
<li>Clicking on a the <code>images</code> button (<img src="https://raw.github.com/erezmazor/graphitus/master/doc/images.png" alt="Images">) will show a drop down with permalinks to the image in small, medium and large sizes (useful for sending links or copying images into email)</li>
</ul><p><img src="https://raw.github.com/erezmazor/graphitus/master/doc/images-drop.png" alt="Images"></p>

<ul>
<li>Clicking on a the <code>graphlot</code> button (<img src="https://raw.github.com/erezmazor/graphitus/master/doc/graphlot.png" alt="Graphlot">) will redirect you to the graph's <code>Graphlot</code> page in your graphite server.</li>
</ul><p>supplying an <code>eventsUrl</code> attribute in config.json will allow you to draw an events overlay on the rickshaw graph, events must be in the following JSON format:</p>

<div class="highlight highlight-javascript"><pre><span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">"message"</span><span class="o">:</span> <span class="s2">"this is an event message"</span><span class="p">,</span>
        <span class="s2">"start"</span><span class="o">:</span> <span class="s2">"15:31:35 28/03/2013"</span><span class="p">,</span>
        <span class="s2">"end"</span><span class="o">:</span> <span class="s2">"15:33:47 28/03/2013"</span>
    <span class="p">},</span>
<span class="p">{</span>
        <span class="s2">"message"</span><span class="o">:</span> <span class="s2">"this is an event message"</span><span class="p">,</span>
        <span class="s2">"start"</span><span class="o">:</span> <span class="s2">"15:31:35 28/03/2013"</span><span class="p">,</span>
        <span class="s2">"end"</span><span class="o">:</span> <span class="s2">"15:33:47 28/03/2013"</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>

<ul>
<li>Override configuration with URL parameters</li>
</ul><p>You can specify configuration properties in the dashboard URL to override default settings:</p>

<p><code>dashboard.html?id=grp1.dash1&amp;defaultLineWidth=25&amp;timeBack=20m&amp;width=350&amp;height=400&amp;columns=4&amp;legend=false</code></p>

<p>You can also specify parameter values in the URL:</p>

<p><code>dashboard.html?id=grp1.dash1&amp;datacenter=LA</code></p>

<h2>
<a name="configuration-attributes" class="anchor" href="#configuration-attributes"><span class="octicon octicon-link"></span></a>Configuration attributes</h2>

<table>
<thead><tr>
<th>Parameter</th>
<th>Required?</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td>title</td>
<td>Yes</td>
<td>The title of the dashboard chart</td>
</tr>
<tr>
<td>columns</td>
<td>Yes</td>
<td>The number of images in a row</td>
</tr>
<tr>
<td>user</td>
<td>No</td>
<td>Owner</td>
</tr>
<tr>
<td>timeBack</td>
<td>No</td>
<td>Specify timeframe back from current time to display (specify this or <code>from</code> and <code>until</code>), shorthand format e.g., <code>15m</code>, <code>24h</code>, <code>7d</code>, <code>1w</code>
</td>
</tr>
<tr>
<td>from</td>
<td>No</td>
<td>From date/time in <code>yyyy-MM-dd HH:MM</code> (specify this and <code>until</code> or <code>timeBack</code>)</td>
</tr>
<tr>
<td>until</td>
<td>No</td>
<td>To date/time in <code>yyyy-MM-dd HH:MM</code> (specify this and <code>from</code> or <code>timeBack</code>)</td>
</tr>
<tr>
<td>width</td>
<td>Yes</td>
<td>Width of the chart from graphite (see <code>columns</code>)</td>
</tr>
<tr>
<td>height</td>
<td>Yes</td>
<td>Height of the chart from graphite</td>
</tr>
<tr>
<td>legend</td>
<td>No</td>
<td>Show/Hide the legend in the chart (omitting leaves it up to graphite)</td>
</tr>
<tr>
<td>refresh</td>
<td>No</td>
<td>Auto-refresh the charts (see <code>refreshIntervalSeconds</code>)</td>
</tr>
<tr>
<td>refreshIntervalSeconds</td>
<td>No</td>
<td>When <code>refresh</code> is <code>true</code> this will determine the refresh interval</td>
</tr>
<tr>
<td>defaultLineWidth</td>
<td>No</td>
<td>The line width for the generated chart</td>
</tr>
<tr>
<td>tz</td>
<td>No</td>
<td>The timezone for the rendered graphite images (see <a href="http://en.wikipedia.org/wiki/List_of_tz_database_time_zones">Timezone list</a>). Note: timezone resolution is in the following order url, json configuraiton file, cookie, default.</td>
</tr>
</tbody>
</table><h2>
<a name="dynamic-parameters" class="anchor" href="#dynamic-parameters"><span class="octicon octicon-link"></span></a>Dynamic Parameters</h2>

<p>Dynamic parameters allow you to define metric selection and filtering based on dynamic graphite metric API queries. Structuring your graphite metrics tree properly can be useful to create such dashboaards.</p>

<p>Consider the following configuration for the <code>parameters</code> section of the configuration</p>

<div class="highlight highlight-javascript"><pre><span class="s2">"service"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"type"</span><span class="o">:</span> <span class="s2">"dynamic"</span><span class="p">,</span>
    <span class="s2">"query"</span><span class="o">:</span> <span class="s2">"services.prod.*"</span><span class="p">,</span>
    <span class="s2">"index"</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">"showAll"</span><span class="o">:</span> <span class="kc">false</span>
<span class="p">},</span> 
 <span class="s2">"host"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"type"</span><span class="o">:</span> <span class="s2">"dynamic"</span><span class="p">,</span>
    <span class="s2">"query"</span><span class="o">:</span> <span class="s2">"services.prod.${service}.*"</span><span class="p">,</span>
    <span class="s2">"index"</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">"regex"</span><span class="o">:</span> <span class="s2">"(.*)_"</span><span class="p">,</span>
    <span class="s2">"showAll"</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">},</span> 
 <span class="s2">"datacenter"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"type"</span><span class="o">:</span> <span class="s2">"dynamic"</span><span class="p">,</span>
    <span class="s2">"query"</span><span class="o">:</span> <span class="s2">"services.prod.${service}.${host}_*"</span><span class="p">,</span>
    <span class="s2">"index"</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">"regex"</span><span class="o">:</span> <span class="s2">"_(.*)"</span><span class="p">,</span>
    <span class="s2">"showAll"</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"showAllValue"</span><span class="o">:</span> <span class="s2">"host-10000*"</span>
<span class="p">}</span>
</pre></div>

<p>You can then use a target like <code>services.prod.${service}.${host}_${datacenter}.someAttribute</code>. When graphitus loads it will generate select boxes based on the actual values returned from the graphite metric API based on the provided queries. Note that the queries themselves can be parameterized, creating a series of select boxes depending on each other in-order.</p>

<p>Graphitus will also consider generating the list of values from a partial path, the index and regex determine which portion and substring (regex) of the resulting path will be used to generate the values for selection. The <code>showAll</code> property is used to determine if graphitus will prepend a default All (translated to <code>*</code> in the graphite query) option to the selection. The <code>showAllValue</code> parameter can be added to override the default <code>*</code> selection for complex name filtering schemes (you can have token in this value to express dependencies on other parameters).</p>

<h2>
<a name="naming-and-grouping-techniques" class="anchor" href="#naming-and-grouping-techniques"><span class="octicon octicon-link"></span></a>Naming and grouping techniques</h2>

<p>Graphitus path tokenization works well when you structure youd graphite metrics according to a well defined scheme. Consider the following path for graphite metrics: <code>services.prod.myService.dc1.host1.myMetric.value</code> which can be tokenized as <code>services.${environment}.${service}.${datacenter}.${host}.${metric}.value</code></p>

<p>This well-structured hierarchy provides powerful grouping capabilities, for example using the above path structure you can create a generic grouping scheme where you can group values by different aspects. This is achieved using the <code>groupByNode</code> or <code>aliasByNode</code> graphite functions. Here is the graphitus target definition:</p>

<div class="highlight highlight-javascript"><pre><span class="s2">"data"</span><span class="o">:</span> <span class="p">[{</span>
    <span class="s2">"target"</span><span class="o">:</span> <span class="s2">"groupByNode(services.${environment}.${service}.${datacenter}.${host}.${metric}.value,${group},\"averageSeries\")"</span><span class="p">,</span>
    <span class="s2">"title"</span><span class="o">:</span> <span class="s2">"Metric A Value"</span>
<span class="p">}]</span>
</pre></div>

<p>And the corresponding <code>parameters</code> section:</p>

<div class="highlight highlight-javascript"><pre><span class="s2">"parameters"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"environment"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"type"</span><span class="o">:</span> <span class="s2">"dynamic"</span><span class="p">,</span>
        <span class="s2">"query"</span><span class="o">:</span> <span class="s2">"services.*"</span><span class="p">,</span>
        <span class="s2">"index"</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"showAll"</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="s2">"service"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"type"</span><span class="o">:</span> <span class="s2">"dynamic"</span><span class="p">,</span>
        <span class="s2">"query"</span><span class="o">:</span> <span class="s2">"services.${environment}.*"</span><span class="p">,</span>
        <span class="s2">"index"</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">"showAll"</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="s2">"datacenter"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"type"</span><span class="o">:</span> <span class="s2">"dynamic"</span><span class="p">,</span>
        <span class="s2">"query"</span><span class="o">:</span> <span class="s2">"services.${environment}.${service}.*"</span><span class="p">,</span>
        <span class="s2">"index"</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">"showAll"</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="s2">"host"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"type"</span><span class="o">:</span> <span class="s2">"dynamic"</span><span class="p">,</span>
        <span class="s2">"query"</span><span class="o">:</span> <span class="s2">"services.${environment}.${service}.${datacenter}.*"</span><span class="p">,</span>
        <span class="s2">"index"</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="s2">"showAll"</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="s2">"metric"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"type"</span><span class="o">:</span> <span class="s2">"dynamic"</span><span class="p">,</span>
        <span class="s2">"query"</span><span class="o">:</span> <span class="s2">"services.${environment}.${service}.${datacenter}.${host}.*"</span><span class="p">,</span>
        <span class="s2">"index"</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
        <span class="s2">"showAll"</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="s2">"group"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"environment"</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">"group"</span><span class="o">:</span> <span class="mi">1</span>
        <span class="p">},</span>
        <span class="s2">"service"</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">"group"</span><span class="o">:</span> <span class="mi">2</span>
        <span class="p">},</span>
        <span class="s2">"datacenter"</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">"group"</span><span class="o">:</span> <span class="mi">3</span>
        <span class="p">},</span>
        <span class="s2">"host"</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">"group"</span><span class="o">:</span> <span class="mi">4</span>
        <span class="p">},</span>
        <span class="s2">"metric"</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">"group"</span><span class="o">:</span> <span class="mi">5</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h2>
<a name="timezone-support" class="anchor" href="#timezone-support"><span class="octicon octicon-link"></span></a>Timezone support</h2>

<p>Graphitus supports timezones via configuration <code>config.json</code> has a <code>timezones</code> attribute which accepts an array. These are timezones supported by the <a href="https://graphite.readthedocs.org/en/latest/render_api.html#tz">Graphite URL API Timezone parameter</a>. Timezones are supported using the <a href="http://momentjs.com/timezone/">moment-timezone</a> library. In order to correctly define timezones use the <a href="http://momentjs.com/timezone/data/">moment-timezone data builder</a> to customize your own <code>js/moment-timezone-data.js</code> file. Note that moment zone names are different from graphite names, once you generate the <code>js/moment-timezone-data.js</code> file edit it and change timezone names to correspond to the supported graphite names.</p>

<h2>
<a name="additional-information" class="anchor" href="#additional-information"><span class="octicon octicon-link"></span></a>Additional Information</h2>

<ul>
<li><a href="http://techo-ecco.com/blog/monitoring-apache-hadoop-cassandra-and-zookeeper-using-graphite-and-jmxtrans">Blog post</a></li>
<li><a href="https://gist.github.com/erezmazor/5019989#file-cassandra-servers">Cassandra Servers Dashboard</a></li>
<li><a href="https://gist.github.com/erezmazor/5019989#file-cassandra-servers-internals">Cassandra Server Internals Dashboard</a></li>
<li><a href="https://gist.github.com/erezmazor/5019989#file-cassandra-column-families">Cassandra Per-Column Family Dashboard</a></li>
<li><a href="https://gist.github.com/erezmazor/5020008#file-hadoop-namenode">Hadoop NameNode Dashboard</a></li>
<li><a href="https://gist.github.com/erezmazor/5020008#file-hadoop-jobtracker">Hadoop Jobtracker Dashboard</a></li>
<li><a href="https://gist.github.com/erezmazor/5020008#file-hadoop-tasktracker">Hadoop TaskTracker Dashboard</a></li>
<li><a href="https://gist.github.com/erezmazor/5020008#file-hadoop-datanode">Hadoop DataNode Dashboard</a></li>
<li><a href="https://gist.github.com/erezmazor/5020016#file-zookeeper-servers">Zookeeper Dashbaord</a></li>
</ul>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-36660869-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>